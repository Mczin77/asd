<!DOCTYPE html>
<html lang="pt-BR">
<head>
<meta charset="UTF-8">
<title>Painel – KeySystem</title>
<link rel="stylesheet" href="style.css">
</head>

<body>
<div class="container">

  <!-- COLUNA ESQUERDA -->
  <div class="card">
    <div class="header">
      <div class="logo">KS</div>
      <div>
        <h1 class="h1">KeySystem Painel</h1>
        <div class="small">Gerenciamento de keys</div>
      </div>
    </div>

    <hr style="border:1px solid rgba(255,255,255,0.05);margin:15px 0">

    <h3 style="margin:0 0 10px">Gerar nova Key</h3>

    <div class="controls">

      <label class="small">Tipo da Key:</label>
      <select id="type">
        <option value="normal">Normal</option>
        <option value="premium">Premium</option>
        <option value="vip">VIP</option>
      </select>

      <label class="small">Expiração:</label>
      <div class="row">
        <input id="days" type="number" placeholder="Dias" class="input">
        <input id="hours" type="number" placeholder="Horas" class="input">
        <input id="minutes" type="number" placeholder="Minutos" class="input">
      </div>

      <button class="btn-primary" onclick="generateKeyUI()">Gerar Key</button>

    </div>
  </div>

  <!-- COLUNA DIREITA -->
  <div class="card">
    <div class="topbar">
      <h2 style="margin:0;font-size:17px">Keys Registradas</h2>
      <span class="badge" id="totalKeys">0 keys</span>
    </div>

    <table class="table">
      <thead>
        <tr>
          <th>Key</th>
          <th>Expira em</th>
          <th>Usos</th>
          <th>Executor</th>
          <th>IP</th>
          <th>Ações</th>
        </tr>
      </thead>
      <tbody id="keysBody"></tbody>
    </table>
  </div>

</div>

<script src="app.js"></script>
<script>
// Atualiza badge de contagem
async function updateCount() {
  const r = await fetch("/api/list", {
    headers: { "x-panel-token": PANEL_TOKEN }
  });
  const j = await r.json();
  if (j.ok) {
    document.getElementById("totalKeys").innerText = j.keys.length + " keys";
  }
}
setInterval(updateCount, 2000);
</script>

</body>
</html>
